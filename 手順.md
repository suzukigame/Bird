# アプリケーション運用手順

このドキュメントでは、新しい写真を追加し、GitHub Pagesに反映させるための手順を説明します。

## 1. 新しい写真の追加

新しい野鳥の写真を追加するには、以下のステップが必要です。

### 1.1. 写真ファイルの配置

新しい写真ファイル（例: `20250801_tokyo_sparrow_01.JPG`）を以下のディレクトリに配置してください。

```
my-bird-photos/public/images/birds/
```

**フォルダ構成**
`my-bird-photos/public/images/birds/` の直下に、鳥の**科**の名前のフォルダを作成し、その中に写真を配置してください。
例: `my-bird-photos/public/images/birds/カモ/`

**命名規則**
`YYYYMMDD_prefecture_englishspecies_ID.拡張子`

*   `YYYYMMDD`: 撮影年月日 (例: `20250801`)
*   `prefecture`: 都道府県のローマ字表記 (例: `tokyo`, `ibaraki`)
*   `englishspecies`: 鳥の英名（スペースはアンダースコア `_` に置き換え）
*   `ID`: 同じ日に同じ鳥種を複数撮影した場合の識別子（例: `01`, `02`）。省略可能。

例: `20250801_tokyo_barn_swallow_01.JPG`

※鳥の英名と和名の対応は `bird_list_table.md` を参照してください。

### 1.2. 写真データの更新

写真ファイルを配置した後、`photos.ts` ファイルを更新する必要があります。このファイルは、以下のPythonスクリプトを実行することで自動的に生成されます。

```bash
py regenerate_photos_ts.py
```

このスクリプトは、`my-bird-photos/public/images/birds/` 内のすべての画像ファイルをスキャンし、`photos.ts` を最新の状態に更新します。`photos.ts` を手動で編集する必要はありません。

### 1.3. キャラクターデータの追加（任意）

写真の拡大表示時にデフォルメされたキャラ画像と説明を表示したい場合は、以下の手順でデータを追加してください。

1.  **キャラ画像の配置**
    デフォルメされたキャラ画像（例: `oohakuchou.png`）を以下のディレクトリに配置してください。
    `my-bird-photos/public/images/characters/`

2.  **`character_data.ts` の編集**
    `my-bird-photos/src/data/character_data.ts` ファイルを編集し、新しいキャラクターの情報を追記します。

    **`my-bird-photos/src/data/character_data.ts`**

    ```typescript
    export const characterData: ICharacterData = {
      '鳥の和名': {
        image: '/images/characters/キャラ画像ファイル名.png', // 配置したキャラ画像へのパス
        description: 'キャラの説明文',
      },
      // 他のキャラデータもここに追加します
    };
    ```

    *   `鳥の和名`: `photos.ts` の `birdSpecies` と完全に一致させてください。
    *   `image`: `my-bird-photos/public/images/characters/` からの相対パスを指定してください。

## 2. GitHub Pagesへの反映

写真やデータの変更をGitHub Pagesに反映させるには、以下の手順を実行します。

### 2.1. Gitへのコミット

変更したファイル（写真ファイル、`photos.ts`、`character_data.ts` など）をGitにコミットします。

まず、変更をステージングします。
```bash
git add .
```

次に、変更をコミットします。コミットメッセージは、変更内容がわかるように記述してください。
```bash
git commit -m "feat: Add new bird photos and update data"
```

### 2.2. GitHubへのプッシュ

コミットした変更をGitHubのリモートリポジトリにプッシュします。
```bash
git push origin main
```
（`main` はあなたのメインブランチ名に合わせてください。通常は `main` または `master` です。）

### 2.3. アプリケーションのビルドとデプロイ

`my-bird-photos` ディレクトリに移動し、ビルドとデプロイコマンドを実行します。

```bash
cd my-bird-photos
npm run build
npm run deploy
```

`npm run build` はアプリケーションをビルドし、`npm run deploy` はGitHub Pagesに公開します。デプロイが完了すると、「Published」と表示されます。

デプロイ後、GitHub Pagesが更新されるまでには数分かかる場合があります。ブラウザのキャッシュをクリアするか、しばらく時間をおいてから再度アクセスしてみてください。